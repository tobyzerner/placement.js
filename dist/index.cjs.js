"use strict";var NAMES={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"]};function normalizeRect(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}function index(e,t,o,r,i){void 0===o&&(o="bottom"),void 0===r&&(r="center"),void 0===i&&(i={}),(t instanceof Element||t instanceof Range)&&(t=normalizeRect(t.getBoundingClientRect()));var f=Object.assign({top:t.bottom,bottom:t.top,left:t.right,right:t.left},t),a=window.visualViewport,n={top:0,left:0,bottom:a?a.height:window.innerHeight,right:a?a.width:window.innerWidth};i.bound&&((i.bound instanceof Element||i.bound instanceof Range)&&(i.bound=normalizeRect(i.bound.getBoundingClientRect())),Object.assign(n,i.bound));var s=getComputedStyle(e),l={},m={};for(var b in NAMES)l[b]=NAMES[b]["top"===o||"bottom"===o?0:1],m[b]=NAMES[b]["top"===o||"bottom"===o?1:0];e.style.position=i.fixed?"fixed":"absolute",e.style.maxWidth="",e.style.maxHeight="";var d=parseInt(s[m.marginBefore]),g=parseInt(s[m.marginAfter]),c=d+g,h=n[m.after]-n[m.before]-c,p=parseInt(s[m.maxSize]);(!p||h<p)&&(e.style[m.maxSize]=h+"px");var u=parseInt(s[l.marginBefore])+parseInt(s[l.marginAfter]),x=f[l.before]-n[l.before]-u,S=n[l.after]-f[l.after]-u;(o===l.before&&e[l.offsetSize]>x||o===l.after&&e[l.offsetSize]>S)&&(o=x>S?l.before:l.after);var z=o===l.before?x:S,y=parseInt(s[l.maxSize]);(!y||z<y)&&(e.style[l.maxSize]=z+"px");var v=i.fixed?0:window[l.scrollOffset],w=function(t){return Math.max(n[l.before],Math.min(t,n[l.after]-e[l.offsetSize]-u))};o===l.before?(e.style[l.before]=v+w(f[l.before]-e[l.offsetSize]-u)+"px",e.style[l.after]="auto"):(e.style[l.before]=v+w(f[l.after])+"px",e.style[l.after]="auto");var M=i.fixed?0:window[m.scrollOffset],R=function(t){return Math.max(n[m.before],Math.min(t,n[m.after]-e[m.offsetSize]-c))};switch(r){case"start":e.style[m.before]=M+R(f[m.before]-d)+"px",e.style[m.after]="auto";break;case"end":e.style[m.before]="auto",e.style[m.after]=M+R(document.documentElement[m.clientSize]-f[m.after]-g)+"px";break;default:var A=f[m.after]-f[m.before];e.style[m.before]=M+R(f[m.before]+A/2-e[m.offsetSize]/2-d)+"px",e.style[m.after]="auto"}e.dataset.side=o,e.dataset.align=r}module.exports=index;
