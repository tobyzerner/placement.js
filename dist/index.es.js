var e={size:["height","width"],clientSize:["clientHeight","clientWidth"],offsetSize:["offsetHeight","offsetWidth"],maxSize:["maxHeight","maxWidth"],before:["top","left"],marginBefore:["marginTop","marginLeft"],after:["bottom","right"],marginAfter:["marginBottom","marginRight"],scrollOffset:["pageYOffset","pageXOffset"]};function t(e){return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}export default function(o,f,r,i,a){void 0===r&&(r="bottom"),void 0===i&&(i="center"),void 0===a&&(a={}),(f instanceof Element||f instanceof Range)&&(f=t(f.getBoundingClientRect()));var n=Object.assign({top:f.bottom,bottom:f.top,left:f.right,right:f.left},f),s=window.visualViewport,l={top:0,left:0,bottom:s?s.height:window.innerHeight,right:s?s.width:window.innerWidth};a.bound&&((a.bound instanceof Element||a.bound instanceof Range)&&(a.bound=t(a.bound.getBoundingClientRect())),Object.assign(l,a.bound));var b=getComputedStyle(o),m={},d={};for(var g in e)m[g]=e[g]["top"===r||"bottom"===r?0:1],d[g]=e[g]["top"===r||"bottom"===r?1:0];o.style.position=a.fixed?"fixed":"absolute",o.style.maxWidth="",o.style.maxHeight="";var h=parseInt(b[d.marginBefore]),p=parseInt(b[d.marginAfter]),u=h+p,c=l[d.after]-l[d.before]-u,x=parseInt(b[d.maxSize]);(!x||c<x)&&(o.style[d.maxSize]=c+"px");var y=parseInt(b[m.marginBefore])+parseInt(b[m.marginAfter]),z=n[m.before]-l[m.before]-y,S=l[m.after]-n[m.after]-y;(r===m.before&&o[m.offsetSize]>z||r===m.after&&o[m.offsetSize]>S)&&(r=z>S?m.before:m.after);var v=r===m.before?z:S,w=parseInt(b[m.maxSize]);(!w||v<w)&&(o.style[m.maxSize]=v+"px");var O=a.fixed?0:window[m.scrollOffset],B=function(e){return Math.max(l[m.before],Math.min(e,l[m.after]-o[m.offsetSize]-y))};r===m.before?(o.style[m.before]=O+B(n[m.before]-o[m.offsetSize]-y)+"px",o.style[m.after]="auto"):(o.style[m.before]=O+B(n[m.after])+"px",o.style[m.after]="auto");var I=a.fixed?0:window[d.scrollOffset],H=function(e){return Math.max(l[d.before],Math.min(e,l[d.after]-o[d.offsetSize]-u))};switch(i){case"start":o.style[d.before]=I+H(n[d.before]-h)+"px",o.style[d.after]="auto";break;case"end":o.style[d.before]="auto",o.style[d.after]=I+H(document.documentElement[d.clientSize]-n[d.after]-p)+"px";break;default:var R=n[d.after]-n[d.before];o.style[d.before]=I+H(n[d.before]+R/2-o[d.offsetSize]/2-h)+"px",o.style[d.after]="auto"}o.dataset.side=r,o.dataset.align=i}
